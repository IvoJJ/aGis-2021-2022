<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta property="og:site_name" content="aGis Course Website 2021/2022">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://IvoJJ.github.io/aGis-2021-2022//img/proxy-image.jpg">
    <meta property="twitter:image" content="https://IvoJJ.github.io/aGis-2021-2022//img/proxy-image.jpg" />
    

    
    <meta name="title" content="About Lidar Metrics and forest microclimate" />
    <meta property="og:title" content="About Lidar Metrics and forest microclimate" />
    <meta property="twitter:title" content="About Lidar Metrics and forest microclimate" />
    

    
    <meta name="description" content="Post about which Lidar metrics can be used to describe forest microclimate and how they are calculated">
    <meta property="og:description" content="Post about which Lidar metrics can be used to describe forest microclimate and how they are calculated" />
    <meta property="twitter:description" content="Post about which Lidar metrics can be used to describe forest microclimate and how they are calculated" />
    

    
    <meta property="twitter:card" content="summary" />
    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>    
    
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/aGis-2021-2022/css/hugo-cite.css" />
<link rel="stylesheet" href="https://IvoJJ.github.io/aGis-2021-2022/css/stackoverflow-light.min.css" rel="stylesheet" id="theme-stylesheet">
<script src="https://IvoJJ.github.io/aGis-2021-2022/js/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

    <meta name="keyword"  content="my key words">
    <link rel="shortcut icon" href="/aGis-2021-2022/img/favicon.ico">

    <title>About Lidar Metrics and forest microclimate-my Seotitle</title>

    <link rel="canonical" href="/aGis-2021-2022/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/">
    

  <script src="https://unpkg.com/boxicons@2.0.9/dist/boxicons.js"></script>
    
    <link href="https://IvoJJ.github.io/aGis-2021-2022/css/boxes.css" rel="stylesheet">

    <link rel="stylesheet" href="/aGis-2021-2022/css/iDisqus.min.css"/>

    
    <link rel="stylesheet" href="/aGis-2021-2022/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/aGis-2021-2022/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/aGis-2021-2022/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet" type="text/css">

    
    

    
    
    <script src="/aGis-2021-2022/js/jquery.min.js"></script>

    
    <script src="/aGis-2021-2022/js/bootstrap.min.js"></script>

    
    <script src="/aGis-2021-2022/js/hux-blog.min.js"></script>

    
    

</head>




<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/aGis-2021-2022/"> HOME </a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                   
                    
                        
                        <li>
                            <a href="/aGis-2021-2022/categories/agis">agis</a>
                        </li>
                        
                        <li>
                            <a href="/aGis-2021-2022/categories/help">help</a>
                        </li>
                        
                    
                    
		    
                        <li><a href="/aGis-2021-2022/top/archive/">CONTENT</a></li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/aGis-2021-2022/img/ungabunga.jpg');
  max-height: 350px
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-0 col-lg-offset-0 col-md-0 col-md-offset-0">
                <div class="post-heading">
                   
                    <h1>About Lidar Metrics and forest microclimate</h1>
                   
            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                
<script src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this blog post different lidR metrics and ecological indices are calculated using Lidar data. These will be used to model forest microclimate in future applications.</p>
</div>
<div id="data-and-methods" class="section level2">
<h2>Data and Methods</h2>
<p>Only one tile from the calculated lidR catalog is used, due to computation time. The lidR catalog
was calculated using the provided script from <a href="https://gisma-courses.github.io/gi-modules/post/2021-11-20-forest-information-from-lidar-data/" class="uri">https://gisma-courses.github.io/gi-modules/post/2021-11-20-forest-information-from-lidar-data/</a>.
Using the lidR Package, different metrics and ecological indices are calculated at grid- and voxel level. Afterwards they are stacked for convenient accessibility for future modelling of forest microclimate.</p>
<p><strong>The calculated metrics and indices are:</strong></p>
<ul>
<li>Standard deviation (SD) &amp; Maximum, Minimum of the First Returns</li>
<li>Leaf Area Density (LAD) and Shannon Index of the LAD</li>
<li>Canopy Height Model &amp; Normalized Parameters</li>
<li>Digital Terrain Model</li>
<li>Point Density Metrics</li>
</ul>
<p><strong>Why were these metrics/indices chosen:</strong></p>
<p>These metrics are a prototype draft and were chosen based on discussions in the Agis course and past studies.
It was found that metrics of the first returns, the LAD and the Shannon Index seem to be correlated to temperature and can be used to predict microclimate (Carrasco et al. 2019). According to Latif et al. (2012) elevation-based metrics might be beneficial to model microclimate in forests. DTMs could also be useful to include in a model as variables like exposition could impact the microclimate depending on the location. As it was discussed in the course, point density might also be a strong predictor for forest microclimate.</p>
</div>
<div id="calculation-results" class="section level2">
<h2>Calculation &amp; Results</h2>
<p>First, visualize the LAS</p>
<pre class="r"><code>#plot(ras, main = &quot;Rasterized LAS&quot;)</code></pre>
<p>Calculate SD of the first returns with a resolution of 5m and visualize</p>
<pre class="r"><code>sd_FR &lt;- grid_metrics(las, func = sd(Z), res = 5, by_echo = &quot;first&quot;)
plot(sd_FR, main = &quot;SD First returns [m]&quot;)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/firstreturns-1.png" width="672" /></p>
<p>Normalize height and build CHM with standard pitfree parameters (use ?pitfree for reference)</p>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/chm-1.png" width="672" /></p>
<p>Calculate Digital Terrain Model (DTM) with k-nearest neighbor approach (Reference: ?knnidw)</p>
<pre class="r"><code>DTM &lt;- lidR::grid_terrain(las, res = 5.0, algorithm = lidR::knnidw(k = 10, p = 2))</code></pre>
<pre><code>## Warning: There were 5 degenerated ground points. Some X Y coordinates were
## repeated but with different Z coordinates. min Z were retained.</code></pre>
<pre class="r"><code>lidR::plot(DTM, main = &quot;KNN DTM with resolution = 5m&quot;)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>hist(DTM, xlab = &quot;Elevation [m]&quot;)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<p>Calculate LAD &amp; LAD based Shannon Index</p>
<pre class="r"><code>LAD &lt;- voxel_metrics(las, func = LAD(Z), res = 5)
LAD &lt;- na.omit(LAD)

LAD_Shannon &lt;- voxel_metrics(las, func = entropy(Z), res = 5)
LAD_Shannon &lt;-na.omit(LAD_Shannon)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<p>Calculate Point density</p>
<pre class="r"><code>pdense &lt;- lidR::grid_metrics(nLas, ~length(Z)/25, res = 5.0)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Calculate some more standard metrics for the first returns and canopy height</p>
<pre class="r"><code>mean_FR &lt;- grid_metrics(las, func = ~mean(Z), res = 5, by_echo = &quot;first&quot;)
max_FR &lt;- grid_metrics(las, func = ~max(Z), res = 5, by_echo = &quot;first&quot;)
min_FR &lt;- grid_metrics(las, func = ~min(Z), res = 5, by_echo = &quot;first&quot;)

h_mean &lt;- lidR::grid_metrics(nLas, func = ~mean(Z), res = 5.0)
h_max &lt;- lidR::grid_metrics(nLas, func = ~max(Z), res = 5.0)
h_min &lt;- lidR::grid_metrics(nLas, func = ~min(Z), res = 5.0)
h_sd &lt;- lidR::grid_metrics(nLas, func = ~sd(Z), res = 5.0)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-6-2.png" width="672" /><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-6-3.png" width="672" /></p>
<p>Stack all of the calculated metrics and indices together</p>
<pre class="r"><code>lidarstack &lt;- stack(CHM, DTM, h_max, h_mean, h_min, h_sd, max_FR, mean_FR, min_FR, sd_FR, pdense)
names(lidarstack)</code></pre>
<pre><code>##  [1] &quot;CHM&quot;           &quot;DTM&quot;           &quot;h_max&quot;         &quot;h_mean&quot;       
##  [5] &quot;h_min&quot;         &quot;h_sd&quot;          &quot;max_FR&quot;        &quot;mean_FR&quot;      
##  [9] &quot;min_FR&quot;        &quot;sd_FR&quot;         &quot;point_density&quot;</code></pre>
<pre class="r"><code>#saveRDS(lidarstack, paste0(envrmt$path_data, &quot;lidarstack.RDS&quot;))
plot(lidarstack)</code></pre>
<p><img src="https://IvoJJ.github.io/aGis-2021-2022/post/2022-01-18-lidar-metrics-for-forest-microclimate/index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="outlook" class="section level2">
<h2>Outlook</h2>
<p>The next post will be about cleaning the data (which should’ve been done partially before calculating the metrics, will also be be added) and remove autocorreclated data and setting up a data frame, which can be used to predict forest microclimate for the chosen study area.</p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Carrasco, L., Giam, X., Papeş, M. &amp; Sheldon, K.S. (2019): Metrics of Lidar-Derived 3D Vegetation Structure Reveal Contrasting Effects of Horizontal and Vertical Forest Heterogeneity on Bird Species Richness. Remote Sens. 11, 743.</p>
<p>Latif, Z.A. (2012): Forest Microclimate Modelling Using Remotely Sensed Data. ISrJ 2 (1), 19-25.</p>
<p>Roussel, J.-R., Goodbody, T.R.H. &amp; Tompalski, P. (2021): The lidR package. <a href="https://jean-romain.github.io/lidRbook/index.html" class="uri">https://jean-romain.github.io/lidRbook/index.html</a> (access: 28.12.2021).
put all references here</p>
</div>

                <style>
.button {
  border: none;
  border-radius: 4px 4px; 
  color: white;
  padding: 2px 4px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 12px;
  transition-duration: 0.5s;
  cursor: pointer;
  background-color: #4CAF50; 
  
}
.button1 a:link {
  color: #FFF;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:visited {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}

.button1 a:hover {
  color: white;
    padding: 2px 4px;
    border-radius: 4px 4px;        
  background-color: #3FA043; 
  
}

.button1 a:active {
  color: white;
    border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}
}

.button1 {
  color: white;
  border-radius: 4px 4px;        
  background-color: #4CAF50; 
  
}


.button1:hover {
  background-color: #4CAF60;
    box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)
}

</style>

 
 
<div class="col-12 col-lg-10ish article-style">     
<p>Questions and mistakes but also suggestions and solutions are welcome.</p>
<script src="https://utteranc.es/client.js"
        repo="/"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous" 
        async>
</script>
<p>Due to an occasionally faulty page redirection, a 404 error may occur. please use the alternative <button class="button button1"> <a href="https://api.utteranc.es/authorize?redirect_uri=https%3a%2f%2fIvoJJ.github.io%2faGis-2021-2022%2fpost%2f2022-01-18-lidar-metrics-for-forest-microclimate%2f">Sign in with GitHub</a></button></p>
    
</div>

                
                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/aGis-2021-2022/post/2021-12-07-about-lidar-metrics/" data-toggle="tooltip" data-placement="top" title="About Lidar Metrics">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/aGis-2021-2022/post/markdown-syntax/" data-toggle="tooltip" data-placement="top" title="Markdown Syntax Guide">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">Content</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            
            
            

            
            <div class="
                col-lg-2 col-lg-offset-0
                col-md-3 col-md-offset-1
                sidebar-container
                catalog-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">Tag Nav</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/aGis-2021-2022/tags/task" title="task">
                            task
                        </a>
                        
                        
                    </div>
                </section>
                 

                
                
                      
            </div>
        </div>
    </div>

    
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    <li>
                        <a href="mailto:youremail@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    

                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/yourgithub">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; aGis Course Website 2021/2022 2022
                    <br>
                    <a href="https://themes.gohugo.io/hugo-theme-cleanwhite">CleanWhite Hugo Theme</a> by <a href="https://zhaohuabing.com">Huabing</a> 
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>









<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/aGis-2021-2022\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>


</body>
</html>
